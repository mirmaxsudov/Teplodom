import React from "react";
import P1 from "../../../../public/images/products/p1.png";
import { FcLike } from "react-icons/fc";
import { useDispatch } from "react-redux";
import { toggleProductLike } from "../../../features/products/productSlice";
import { Link, useNavigate } from "react-router-dom";
import { addToBasket } from "../../../features/basket/basketSlice";
import "./ProductItem.css";

const ProductItem = ({ product, isBasket }) => {
  const dispatch = useDispatch();
  const navigate = useNavigate();

  const handleLikeBtn = (event) => {
    dispatch(
      toggleProductLike({ productId: product.id, isLiked: product.isLiked }),
    );
    event.stopPropagation();
  };

  const handleDetailPage = () => navigate(`/product/${product.id}`);

  const handleToBasket = product => dispatch(addToBasket(product));

  return (
    <div
      onClick={() => {
        handleDetailPage();
      }}
      to={`/product/${product.id}`}
      className="product-item w-[255px] bg-[#fff] rounded-[15px] cursor-pointer hover:transform hover:scale-105 transition-all duration-300 shadow-sm"
    >
      <div className="img-wrapper h-[202px]">
        <img
          src={product.image}
          alt="Image"
          className="w-[100%] h-[100%] m-auto px-[53px] py-[27px] object-contain"
        />
      </div>
      <div className="px-[15px] py-[28px]">
        <p className="text-[#000] mb-[28px]">{product.title}</p>
        <p className="price font-bold text-[19px]">{product.price} cум</p>
        <div className="product-item-bottom grid grid-cols-4 gap-[10px] mt-[20px]">
          <button
            onClick={e => {
              e.stopPropagation();
              handleToBasket(product)
            }}
            className={`bg-[#FFB12A] col-span-3 py-[7px] px-[20px] rounded-[8px] flex items-center justify-center`}>
            <div className="flex items-center gap-[5px] text-[#fff]">
              {
                !isBasket ? <svg
                  width="28"
                  height="28"
                  viewBox="0 0 28 28"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M8.16699 25.6668C7.52533 25.6668 6.97621 25.4386 6.51966 24.982C6.06233 24.5247 5.83366 23.9752 5.83366 23.3335C5.83366 22.6918 6.06233 22.1423 6.51966 21.685C6.97621 21.2284 7.52533 21.0002 8.16699 21.0002C8.80866 21.0002 9.35777 21.2284 9.81433 21.685C10.2717 22.1423 10.5003 22.6918 10.5003 23.3335C10.5003 23.9752 10.2717 24.5247 9.81433 24.982C9.35777 25.4386 8.80866 25.6668 8.16699 25.6668ZM19.8337 25.6668C19.192 25.6668 18.6429 25.4386 18.1863 24.982C17.729 24.5247 17.5003 23.9752 17.5003 23.3335C17.5003 22.6918 17.729 22.1423 18.1863 21.685C18.6429 21.2284 19.192 21.0002 19.8337 21.0002C20.4753 21.0002 21.0248 21.2284 21.4822 21.685C21.9387 22.1423 22.167 22.6918 22.167 23.3335C22.167 23.9752 21.9387 24.5247 21.4822 24.982C21.0248 25.4386 20.4753 25.6668 19.8337 25.6668ZM7.17533 7.00016L9.97533 12.8335H18.142L21.3503 7.00016H7.17533ZM8.16699 19.8335C7.29199 19.8335 6.63088 19.4493 6.18366 18.6808C5.73644 17.9132 5.71699 17.1502 6.12533 16.3918L7.70033 13.5335L3.50033 4.66683H2.30449C1.97394 4.66683 1.70171 4.55483 1.48783 4.33083C1.27394 4.10761 1.16699 3.83072 1.16699 3.50016C1.16699 3.16961 1.27899 2.89233 1.50299 2.66833C1.72621 2.44511 2.0031 2.3335 2.33366 2.3335H4.22949C4.44338 2.3335 4.64755 2.39183 4.84199 2.5085C5.03644 2.62516 5.18227 2.79044 5.27949 3.00433L6.06699 4.66683H23.2753C23.8003 4.66683 24.16 4.86127 24.3545 5.25016C24.5489 5.63905 24.5392 6.04739 24.3253 6.47516L20.1837 13.9418C19.9698 14.3307 19.6878 14.6321 19.3378 14.846C18.9878 15.0599 18.5892 15.1668 18.142 15.1668H9.45033L8.16699 17.5002H21.0295C21.36 17.5002 21.6323 17.6118 21.8462 17.835C22.06 18.059 22.167 18.3363 22.167 18.6668C22.167 18.9974 22.055 19.2743 21.831 19.4975C21.6078 19.7215 21.3309 19.8335 21.0003 19.8335H8.16699ZM9.97533 12.8335H18.142H9.97533Z"
                    fill="white"
                  />
                </svg> : <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path fillRule="evenodd" clipRule="evenodd" d="M7.98187 2.08636C7.81791 2.18661 2.14362 7.91359 2.05882 8.06438C2.01475 8.14277 2.00147 9.98426 2.00016 16.1868C1.9987 23.3912 2.00612 24.2339 2.07327 24.4626C2.28163 25.1722 2.84247 25.7307 3.55034 25.9335C3.7862 26.0012 4.65874 26.0071 12.5136 25.995L21.2157 25.9815L21.6145 25.8754C23.5459 25.3612 24.9928 24.0874 25.6727 22.3026C25.9328 21.6198 26 21.2156 26 20.3333C26 19.6376 25.9839 19.4485 25.8941 19.0907C25.3993 17.119 24.0308 15.6258 22.1385 14.993C21.66 14.8329 20.9809 14.7071 20.5939 14.7069L20.3475 14.7067V9.27747C20.3475 3.37457 20.3567 3.59157 20.0851 3.10674C19.9161 2.80525 19.5108 2.40445 19.2325 2.2636C18.6865 1.98738 18.9686 1.99994 13.3114 2.00013C8.36002 2.00027 8.11623 2.00421 7.98187 2.08636ZM18.5642 3.52489C18.6615 3.58106 18.7715 3.70461 18.834 3.82788L18.9396 4.03602V9.45743V14.8788L18.6591 14.9568C17.5755 15.2578 16.3196 16.1795 15.6618 17.1566L15.4171 17.52L10.3621 17.5201C5.40063 17.5203 5.30415 17.522 5.15402 17.6135C4.70074 17.8896 4.70074 18.5569 5.15402 18.8331C5.30396 18.9244 5.39997 18.9263 10.0585 18.9264C13.8287 18.9266 14.8098 18.9387 14.8091 18.9852C14.8087 19.0175 14.7771 19.2337 14.7389 19.4658C14.7007 19.6979 14.6694 19.988 14.6693 20.1105L14.6692 20.3333L9.98806 20.3334C5.39983 20.3336 5.30391 20.3355 5.15402 20.4268C4.70074 20.7029 4.70074 21.3702 5.15402 21.6464C5.30396 21.7377 5.40002 21.7396 10.0782 21.7397L14.8494 21.7399L14.8817 21.8923C14.9328 22.1331 15.2238 22.8108 15.4212 23.1486C15.6727 23.5789 15.9315 23.9142 16.2979 24.2842L16.6118 24.6014L10.2472 24.589C3.90169 24.5767 3.88212 24.5764 3.75293 24.48C3.68165 24.4268 3.57981 24.325 3.52659 24.2538C3.42992 24.1245 3.42983 24.1169 3.41753 16.6022L3.40524 9.08007L5.97513 9.07988C8.4567 9.07974 8.55027 9.07651 8.69795 8.98653C8.7821 8.93528 8.89285 8.82462 8.94414 8.74055C9.03424 8.59295 9.03743 8.49945 9.03757 5.99628L9.03776 3.40481L13.7189 3.41742C18.3204 3.4298 18.4027 3.43163 18.5642 3.52489ZM7.62991 6.05578V7.67342H6.03041H4.43086L6.01595 6.05578C6.88779 5.16607 7.60757 4.43813 7.61551 4.43813C7.62344 4.43813 7.62991 5.16607 7.62991 6.05578ZM10.7854 6.36032C10.5715 6.49057 10.4459 6.71615 10.4459 6.9701C10.4459 7.22405 10.5715 7.44963 10.7854 7.57988C10.9339 7.67033 11.0275 7.6731 13.9652 7.6731C16.903 7.6731 16.9966 7.67033 17.145 7.57988C17.5983 7.30376 17.5983 6.63644 17.145 6.36032C16.9966 6.26987 16.903 6.2671 13.9652 6.2671C11.0275 6.2671 10.9339 6.26987 10.7854 6.36032ZM10.7854 9.17361C10.5715 9.30387 10.4459 9.52945 10.4459 9.7834C10.4459 10.0373 10.5715 10.2629 10.7854 10.3932C10.9339 10.4836 11.0275 10.4864 13.9652 10.4864C16.903 10.4864 16.9966 10.4836 17.145 10.3932C17.5983 10.1171 17.5983 9.44974 17.145 9.17361C16.9966 9.08317 16.903 9.0804 13.9652 9.0804C11.0275 9.0804 10.9339 9.08317 10.7854 9.17361ZM5.15402 11.9869C4.94012 12.1172 4.81454 12.3427 4.81454 12.5967C4.81454 12.8506 4.94012 13.0762 5.15402 13.2065C5.30447 13.2981 5.40218 13.2997 11.1495 13.2997C16.8969 13.2997 16.9946 13.2981 17.145 13.2065C17.5983 12.9303 17.5983 12.263 17.145 11.9869C16.9946 11.8952 16.8969 11.8937 11.1495 11.8937C5.40218 11.8937 5.30447 11.8952 5.15402 11.9869ZM5.15402 14.8002C4.70074 15.0763 4.70074 15.7436 5.15402 16.0198C5.30386 16.1111 5.39955 16.113 9.85976 16.1131C15.0109 16.1133 14.6299 16.1421 14.844 15.7376C14.9785 15.4835 14.9785 15.3365 14.844 15.0824C14.6299 14.6779 15.0109 14.7067 9.85976 14.7069C5.39955 14.707 5.30386 14.7089 5.15402 14.8002ZM20.804 16.1638C23.9764 16.5172 25.6381 20.0206 23.885 22.6595C22.7122 24.4248 20.4154 25.0686 18.5407 24.1573C16.341 23.088 15.4633 20.4771 16.596 18.3722C17.3294 17.0093 18.5805 16.2416 20.2672 16.1194C20.3134 16.116 20.555 16.136 20.804 16.1638ZM22.2012 18.983C22.1495 19.0125 21.5618 19.5657 20.895 20.2124C20.2282 20.8591 19.6677 21.3938 19.6494 21.4007C19.631 21.4075 19.3846 21.1946 19.1018 20.9277C18.819 20.6607 18.5415 20.4177 18.4852 20.3877C18.3254 20.3028 17.9962 20.3223 17.8247 20.4268C17.5166 20.6144 17.3909 21.0472 17.5532 21.3609C17.6259 21.5012 19.1599 22.99 19.3311 23.0863C19.3868 23.1176 19.5274 23.1432 19.6436 23.1432C19.7597 23.1432 19.9003 23.1176 19.956 23.0863C20.1221 22.9928 23.0686 20.0956 23.1422 19.9533C23.3041 19.6405 23.178 19.2076 22.8703 19.0201C22.6996 18.9162 22.3522 18.8968 22.2012 18.983Z" fill="white" stroke="white" stroke-width="0.3" />
                </svg>

              }
              {isBasket ? "Оформить" : "В корзину"}
            </div>
          </button>
          <>
            <button
              onClick={handleLikeBtn}
              className={`like-btn ${!isBasket ? "bg-[#FFB12A]" : "bg-[#fff] border-[3px]"} col-span-1 flex items-center justify-center py-[7px] rounded-[8px] ml-auto w-[50px] h-[50px] transition-all duration-300`}
            >
              {
                isBasket ? <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6.16659 2.66683C6.16659 2.04799 6.41242 1.4545 6.85 1.01691C7.28759 0.579329 7.88108 0.333496 8.49992 0.333496H15.4999C16.1188 0.333496 16.7122 0.579329 17.1498 1.01691C17.5874 1.4545 17.8333 2.04799 17.8333 2.66683V5.00016H22.4999C22.8093 5.00016 23.1061 5.12308 23.3249 5.34187C23.5437 5.56066 23.6666 5.85741 23.6666 6.16683C23.6666 6.47625 23.5437 6.77299 23.3249 6.99179C23.1061 7.21058 22.8093 7.3335 22.4999 7.3335H21.2528L20.2413 21.4992C20.1994 22.0878 19.9359 22.6388 19.5041 23.041C19.0722 23.4432 18.5039 23.6668 17.9138 23.6668H6.08492C5.49475 23.6668 4.9265 23.4432 4.49462 23.041C4.06274 22.6388 3.79932 22.0878 3.75742 21.4992L2.74825 7.3335H1.49992C1.1905 7.3335 0.893753 7.21058 0.674961 6.99179C0.456168 6.77299 0.333252 6.47625 0.333252 6.16683C0.333252 5.85741 0.456168 5.56066 0.674961 5.34187C0.893753 5.12308 1.1905 5.00016 1.49992 5.00016H6.16659V2.66683ZM8.49992 5.00016H15.4999V2.66683H8.49992V5.00016ZM5.08625 7.3335L6.08609 21.3335H17.9149L18.9148 7.3335H5.08625ZM9.66659 9.66683C9.97601 9.66683 10.2728 9.78975 10.4915 10.0085C10.7103 10.2273 10.8333 10.5241 10.8333 10.8335V17.8335C10.8333 18.1429 10.7103 18.4397 10.4915 18.6585C10.2728 18.8772 9.97601 19.0002 9.66659 19.0002C9.35717 19.0002 9.06042 18.8772 8.84163 18.6585C8.62284 18.4397 8.49992 18.1429 8.49992 17.8335V10.8335C8.49992 10.5241 8.62284 10.2273 8.84163 10.0085C9.06042 9.78975 9.35717 9.66683 9.66659 9.66683ZM14.3333 9.66683C14.6427 9.66683 14.9394 9.78975 15.1582 10.0085C15.377 10.2273 15.4999 10.5241 15.4999 10.8335V17.8335C15.4999 18.1429 15.377 18.4397 15.1582 18.6585C14.9394 18.8772 14.6427 19.0002 14.3333 19.0002C14.0238 19.0002 13.7271 18.8772 13.5083 18.6585C13.2895 18.4397 13.1666 18.1429 13.1666 17.8335V10.8335C13.1666 10.5241 13.2895 10.2273 13.5083 10.0085C13.7271 9.78975 14.0238 9.66683 14.3333 9.66683Z" fill="#E1E1E1" />
                </svg> :
                  product.isLiked ? (
                    <FcLike className={"w-[28px] h-[28px]"} />
                  ) : (
                    <svg
                      className="like-icon"
                      width="28"
                      height="28"
                      viewBox="0 0 28 28"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <g clipPath="url(#clip0_1_2126)">
                        <path
                          d="M14.0008 5.28381C16.7413 2.82331 20.9763 2.90498 23.6165 5.54981C26.2555 8.19581 26.3465 12.4098 23.8918 15.1585L13.9985 25.0658L4.10751 15.1585C1.65285 12.4098 1.74502 8.18881 4.38285 5.54981C7.02535 2.90848 11.2522 2.81981 14.0008 5.28381ZM21.9645 7.19831C20.2145 5.44598 17.3912 5.37481 15.5595 7.01981L14.002 8.41748L12.4433 7.02098C10.6058 5.37364 7.78835 5.44598 6.03368 7.20064C4.29535 8.93898 4.20785 11.7215 5.80968 13.5601L13.9997 21.763L22.1897 13.5613C23.7927 11.7215 23.7052 8.94248 21.9645 7.19831Z"
                          fill="white"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_1_2126">
                          <rect width="28" height="28" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                  )
              }
            </button>
          </>
        </div>
      </div>
    </div>
  );
};

export default ProductItem;
